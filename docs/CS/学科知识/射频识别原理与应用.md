# RFID 技术概论

## 什么是 RFID

    无线电频率识别（Radio Frequency Identification，RFID）
    RFID 是 Radio Frequency Identification 的缩写，即射频识别。常称为感应式电子晶片或近接卡、感应卡、非接触卡、电子标签、电子条码，等等。

RFID 工作原理：  
 阅读器通过天线向周围空间发送一定频率的射频信号;标签一旦进入阅读器天线的作用区域将产生感应电流，获得能量被激活;激活标签将自身信息编码后经天线发送出去;阅读器接收该信息，经过解码后必要时送至后台网络;后台网络中主机鉴定标签身份的合法性，只对合法标签进行相关处理，通过向前端发送指令信号控制阅读器对标签的读写操作读写器通常有天线，射频接口及逻辑控制单元组成，其中读写器的逻辑控制模块是整个读写器工作的控制中心、智能单元，是读写器的“大脑”，读写器在工作时由逻辑控制模块发出指令，射频接口模块按照不同的指令做出不同的操作。其中微控制器可以完成信号的编解码、数据的加解密以及执行防碰撞算法；存储单元负责存储一些程序和数据；应用接口负责与上位机进行输入或输出的通信；天线负责将读写器中的电流信号转换成射频载波信号并发送给电子标签，或者接收标签发送过来的射频载波信号并将其转化为电流信号。

特点：
- 通过电磁耦合的方式实现非接触自动识别
- 需要利用无线电频率资源，必须遵守无线电频率使用的众多规范
- 存放的识别信息是数字化的，通过编码技术可以方便地实现多种应用
- 容易地对多应答器、多阅读器进行组合建网，完成大范围地系统应用，构建完善的信息系统
- 涉及计算机、无线数字通信、集成电路、电磁场等众多学科

一套完整 RFID 系统由三部分组成：

- 标签(Tag)：由耦合元件及芯片组成，每个标签具有唯一的电子编码，附着在物体上标识目标对象；
- 阅读器(Reader)：又称为读写器，读取(有时还可以写入)标签信息的设备，可设计为手持式或固定式，典型的读写器终端一般由天线，射频模块，逻辑控制单元组成。
- 天线(Antenna)：在标签和读取器间传递射频信号。

RFID 的应用非常广泛
目前典型应用有动物晶片、汽车晶片防盜器、门禁管制、停车场管制、生产线自动化、物料管理。

RFID 标签有两种

- 有源标签
- 无源标签

RFID 技术是物联网专业的一种关键技术，物联网（internet of things）被称为是信息技术的一次革命创新，它可以分为标识、感知、处理、信息传送四个环节。

RFID 应用的领域相当广泛
1）物流：物流过程中的货物追踪，信息自动采集，仓储应用，港口应用，邮政，快递
2）零售：商品的销售数据实时统计，补货，防盗
3）制造业：生产数据的实时监控，质量追踪，自动化生产
4）服装业：自动化生产，仓储管理，品牌管理，单品管理，渠道管理
5）医疗：医疗器械管理，病人身份识别，婴儿防盗
6）身份识别：电子护照，身份证，学生证等各种电子证件。
7）防伪：贵重物品（烟，酒，药品）的防伪，票证的防伪等
8）资产管理：各类资产（贵重的或数量大相似性高的或危险品等）
9）交通：高速不停车，出租车管理，公交车枢纽管理，铁路机车识别等
10）食品：水果，蔬菜，生鲜，食品等保鲜度管理
11）动物识别：训养动物，畜牧牲口，宠物等识别管理
12）图书馆：书店，图书馆，出版社等应用
13）汽车：制造，防盗，定位，车钥匙
14）航空：制造，旅客机票，行李包裹追踪
15）军事：弹药，枪支，物资，人员，卡车等识别与追踪
16）其它：

RFID 系统至少包含电子标签和阅读器两部分。电子标签是射频识别系统的数据载体，电子标签由标签天线和标签专用芯片组成。未来的电子标签将有以下的发展趋势：成本低，体积小，容量大，工作距离远。

## RFID 技术的基本原理

### RFID 系统的基本原理框图：

```
                            - 能量 ->
通信接口    <---   阅读器    - 时序 ->    应答器
                            <- 数据 ->
```

应答器为集成电路芯片，其工作需要由阅读器提供能量，阅读器产生的射频载波用于为应答器提供能量。  
阅读器和应答器之间的信息交互通常采用轮询-应答的方式实现，需要严格的时序控制，通常由阅读器给出。
应答器和阅读器之间可以实现双向数据传输。应答器传给阅读器通过对载波的负载调制传送。阅读器给应答器的数据通过载波间隙、脉冲位置调制、编码调制等方法实现传送。

### RFID 工作频率：

- 低频（LF）
  30-300kHz；工作频率低于 135kHz，最常用的是 125kHz；小于 10cm  
   最大优点在于靠近金属或液体物品时能有效发射讯号（其他较高频率标签的讯号会被反射）  
   缺点是读取距离短、无法同时多标签读取、信息量低
- 高频（HF）
  3-30MHz；工作频率为 13.56MHz±7kHz；小于 100cm
- 特高频（UHF）
  300MHz-3GHz；工作频率为 433MHz，866-960MHz
- 超高频（SHF）
  3-30GHz；工作频率为 5.8GHz 和 24GHz

频率越高，实现的传输距离越远

UHF 和 SHF 都在 微波 的范围内：  
 300MHz-30GHz

### 应答器的能量供给

- 无源
- 有源
- 半有源/半无源

### RFID 耦合方式

RFID 耦合方式：

- 电感耦合（磁耦合）
- 反向散射耦合（电磁场耦合）

#### 电感耦合

(1)电感耦合。变压器模型，通过空间高频交变磁场实现耦合，依据的是电磁感应定律进行工作。

电感耦合方式一般适合于中、低频工作的近距离射频识别系统。典型的工作频率有：125kHz、225kHz 和 13．56MHz。识别作用距离小于 1m，典型作用距离为 10 ～ 20cm。

#### 反向散射耦合

(2)电磁反向散射耦合：雷达原理模型，发射出去的电磁波，碰到目标后反射，同时携带回目标信息，依据的是电磁波的空间传播规律

电磁反向散射耦合方式一般适合于高频、微波工作的远距离射频识别系统。典型的工作频率有：433MHz，915MHz，2．45GHz，5．8GHz。识别作用距离大于 1m，典型作用距离为 3—l0m.一般来讲，按照读写器和电子标签之间的作用距离可以将射频识别系统划分为三类：密耦合系统、远耦合系统、远距离系统。

## RFID 系统架构

阅读器、应答器、高层

### 应答器

RFID 的技术核心在应答器

射频卡和标签都是应答器的载体

#### 应答器的作用

应答器种类：

- 存储应答器
- 具有密码功能的应答器
- 智能应答器

作用：

- 能量获取
- 时钟
- 数据的输入输出
- 存储

### 阅读器

作用：

- 以射频方式向应答器传输能量
- 从应答器中读数据/写数据
- 完成对数据的信息处理
- 和高层交互信息

组成：

- 振荡器
- 发送通道
- 接收通道
- 微控制器

### 天线

取得最大能量传输效果

### 高层

ALOHA 算法、二进制搜索算法
曼彻斯特码波形、米勒吗波形

# 电感耦合方式的射频前端

## 阅读器天线电路

串联谐振、并联谐振特性上的比较

在某一频率时，电路表现为纯电阻电路

负载调试定性了解
原理、电路构成

### 串联谐振回路

组成：  
电感L（等效电阻R1）、电容C、负载电阻RL、信号源VS（内阻RS）

在某一特定角频率  w0 是，回路电抗X 满足：  
    X = wL - 1/wC = 0
    此时串联谐振回路发生谐振

串联谐振特性：  
- 回路电抗 X = 0，阻抗 Z = R 为最小值，且为纯阻性
- 回路电流最大
- 电感与电容两端电压的模值相等，等于外加电压的 Q 倍

品质因数 Q：  
谐振时回路感抗值（容抗值）与回路总电阻的比值  


## 应答器天线电路

### 并联谐振回路

谐振时，并联谐振回路的谐振电阻等于感抗值的 Qp 倍，且具有纯阻性

电感与电容两端的电流相等，等于外加电流的 Q 倍

## 负载调制

- 电容负载调制
- 电阻负载调制

### 电阻负载调制

开关闭合断开对阻抗Zf1 的影响
    0 时，开关S断开，Rmod 没有接入，开关闭合后，Rmod 接入电路， RL 与 Rmod 并联，负载电阻减小，Z22 下降，反射阻抗Zf1 上升

### 电容负载调制

Cmod 会产生失谐的现象

## 功率放大电路 

1. D 类效率最高，接近 100%
2. 放在 LC 谐振电路之前（放大了后再发送出去）

# 编码和调制

（1）RFID 中常用的编码
（2）各种码的编码规则
（3）能根据给定的数据画出 NRZ，曼彻斯特码，密勒码
（4）常用码之间如何用硬件电路实现转换
（5）RFID 中常用的调制方式，以及各方式的特点

## 信号

### 信道

信息走过的路径

衰减效应
延迟变形
多径效应

噪声

## 编码

### NRZ 码

不归零码：  
使用零电平和正（负）电平分别代表 0 码和 1 码。码元脉冲之间无空隙间隔。

### 波特率和比特率

波特率定义是：每秒钟传送的符号（码元）数量，又称为传码率，单位是波特（Baud、B，即 symbol/s）。  
比特率是每秒钟传送的比特数量，又称为传信率。比特率基本单位为 bit/s 或 bps，全称为 bit per second。

密勒码和曼彻斯特码的关系：每次上升沿时发生一次跳变
修正密勒码是对曼彻斯特码的计数脉冲

## 调制

频移键控（FSK）、相移键控（PSK）

### 调幅波

A：两波峰间的最大值  
B：两波峰间的最小值

（A-B）/（A+B）\*100%

# 数据校验和防碰撞

数据传输的完整性问题

## 差错检测

差错的性质

- 随机错误
  前后错误彼此无关
- 突发错误
  前面出现错误，后面往往也会出错
- 混合错误

### 差错控制

- 反馈重发
- 前向纠错
- 混合纠错

### 检纠错码

信息码元与监督码元
信息码元是发送信息的数据比特，假设为 k 位；监督码元则是为了纠错而增加的冗余码元，假设为 r 位。此时，总码元为 k+r 位。

许用码组和禁用码组
此时，许用码组为 2^k, 禁用码组为剩下的

汉明距离
两码组对应位取值不同的个数

### 检纠错码分类

- 分组码
- 卷积码
- 交织码

编码效率：信息码元数 k 与 总码元数 n 的比值

### RFID 中的差错检测

RFID 中的差错检测主要采用奇偶校验码和 CRC 码，他们都属于线性分组码。

#### 线性分组码

检纠错能力

线性分组码中，检纠错能力和码的最小距离 d 有关：
若要检测码组中 e 位误码，需要 d ≥ e + 1  
 若要纠正码组中 t 位误码，需要 d ≥ 2t + 1  
 若要检测码组中 t 位误码，且同时检测码组中 e 位误码（e ≥ t），需要 d ≥ t + e + 1

#### 奇偶检验码

加上检验码的个数，如果 1 个数为奇数，则为奇检验

用于随机错误检测

#### CRC 码

RFID 工作原理：阅读器通过天线向周围空间发送一定频率的射频信号;标签一旦进入阅读器天线的作用区域将产生感应电流，获得能量被激活;激活标签将自身信息编码后经天线发送出去;阅读器接收该信息，经过解码后必要时送至后台网络;后台网络中主机鉴定标签身份的合法性，只对合法标签进行相关处理，通过向前端发送指令信号控制阅读器对标签的读写操作读写器通常有天线，射频接口及逻辑控制单元组成，其中读写器的逻辑控制模块是整个读写器工作的控制中心、智能单元，是读写器的“大脑”，读写器在工作时由逻辑控制模块发出指令，射频接口模块按照不同的指令做出不同的操作。其中微控制器可以完成信号的编解码、数据的加解密以及执行防碰撞算法；存储单元负责存储一些程序和数据；应用接口负责与上位机进行输入或输出的通信。 4.什么是 RFID 中间件
RFID 是 2005 年建议企业可考虑引入的十大策略技术之一，而中间件（Middleware）可称为是 RFID 运作的中枢，因为它可以加速关键应用的问世。RFID 产业潜力无穷，应用的范围遍及制造、物流、医疗、运输、零售、国防等等。GartnerGroup 认为，RFID 是 2005 年建议企业可考虑引入的十大策略技术之一，然而其成功之关键除了标签（Tag）的价格、天线的设计、波段的标准化、设备的认证之外，最重要的是要有关键的应用软件（KillerApplication），才能迅速推广。而中间件（Middleware）可称为是 RFID 运作的中枢，因为它可以加速关键应用的问世，它最基本的功能是对标签进行数据的读写及 RFID 数据的过滤及分发，即负责管理应用系统及读写器之间的数据流。

## 防碰撞算法

RFID 系统中有两种类型的通信碰撞存在，一种是阅读器碰撞，另一种是电子标签碰撞。  
为了防止碰撞的发生，射频识别系统中需要设计相应的防碰撞技术，在通信中这种技术也称为多址技术，多址技术主要分为以下四种：空/频/码/时分多址。其中最常用的为时分多址。

### ALOHA 算法

时分多址算法

- 纯 ALOHA 算法
  • 主要采用标签先发言（Tag-Talk-First）的方式，即电子标签一旦进入阅读器的工作范围获得 能量后，便向阅读器主动发送自身的序列号。
  • 在某个电子标签向阅读器发送数据的过程中，如果有其它电子标签也同时向该阅读器发送数据，此时阅读器接收到的信号就会产生重叠，导致阅读器无法正确识别和读取数据。  
   • 阅读器通过检测并判断接收到的信号是否发生碰撞，一旦发生碰撞，阅读器则向标签发送指 令使电子标签停止数据的传送，电子标签接到阅读器的指令后，便随机的延迟一段时间再重新发送数据。
- 时隙 ALOHA 算法
  为提高 RFID 系统的吞吐率，可以把时间划分为多段等长的时隙，时隙的长度由系统时钟确定，并且规定电子标签只能在每个时隙的开始时才能向阅读器发送数据帧，这就是时隙 ALOHA 算法；根据上述规定可得，数据帧要么成功发送，要么完全碰撞，避免了纯 ALOHA 算法中部分碰撞的发生。
- 动态时隙 ALOHA 算法
  首先由阅读器把帧长度 N 发送给电子标签，电子标签则产生[1，N]之间的随机数，接下来各电子标签选择相应的时隙，与阅读器进行通信；如果当前时隙与电子标签随机产生的数相同，电子标签则响应阅读器的命令，若不同，标签则继续等待。假如当前时隙内仅有一个电子标签响应，阅读器就读取该标签发送的数据，读取完了以后就使该标签处于“无声”状态。如果当前时隙内有多个标签响应，则该时隙内的数据就出现了碰撞，此时阅读器会通知该时隙内的标签，让它们在下一轮帧循环中重新产生随机数参与通信。逐帧循环，直到识别出所有电子标签为止。
- 二进制树型搜索算法
  基于序列号
  基于随机数和时隙
  查询树算法

# RFID 系统数据传输的安全性

RFID 系统传输的安全性
（1）奇偶校验码的组成
（2）CRC 循环冗余校验码
（3）密码学的基本概念
（4）几种加密体制，RSA 算法的加密原理及过程
（5）在射频识别应用系统上主要采用三种传输信息保护方式，分别是：认证传输方式、加密传输方式、混合传输方式。
（6）加密模型

## RFID 认证技术

阅读器、应答器的认证过程（三次认证）：  
 （1）读写器先发送“查询口令"给标签，标签产生一个随机数 RA 并传送给读写器。  
 （2）读写器收到 RA 后产生另一个随机数 RB，发送一个加密的数据块 Tokenl 给标签，其中 Token 它包含了两个随机数和附加的控制数据，K 为加密密钥，eK 为加密函数。标签收到 Tokenl 后用 K 解密，比较 Tokenl 中的 RA 和标签原来产生的 RA 是否一致。如一致说明读写器合法。  
 （3）标签再产生一个随机数 RA2，发送加密的数据块 Token2 给读写器，其中 Token2 包含了两个随机数和控制数据。读写器收到 Token2 后用 K 解密，比较消息中的 RB 和原来的 RB 是否一致，如一致说明标签合格。

流密码产生密钥
